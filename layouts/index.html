{{ define "main" }}

<h1>{{ .Title }}</h1>

{{ $paginator := .Paginate (where site.RegularPages "Type" "in" site.Params.mainSections) }}

{{ if eq $paginator.PageNumber 1 }}
{{ .Content }}
{{ end }}

{{ range $i, $p := $paginator.Pages.ByPublishDate.Reverse }}
{{ if gt $i 0 }}<hr class="post-separator">{{ end }}
{{ partial "post-excerpt.html" $p }}
{{ end }}

{{ partial "pagination.html" . }}
{{ end }}
